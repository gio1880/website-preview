<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programming | AI Future Team 1</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="../index.html" class="text-2xl font-bold text-blue-600">
                        <i class="fas fa-robot mr-2"></i>AI Future Team 1
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="../index.html" class="text-gray-700 hover:text-blue-600 font-medium transition">
                        <i class="fas fa-home mr-2"></i>Home
                    </a>
                    <a href="index.html" class="text-blue-600 font-medium">
                        <i class="fas fa-cog mr-2"></i>Robot Design
                    </a>
                    <a href="../innovation-project/index.html" class="text-gray-700 hover:text-blue-600 font-medium transition">
                        <i class="fas fa-lightbulb mr-2"></i>Innovation Project
                    </a>
                    <a href="../core-values/index.html" class="text-gray-700 hover:text-blue-600 font-medium transition">
                        <i class="fas fa-heart mr-2"></i>Core Values
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="bg-purple-600 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-4xl font-bold mb-2">Programming</h1>
            <p class="text-purple-100">Advanced programming techniques, platform evolution, and strategy integration</p>
        </div>
    </section>

    <!-- Programming Content -->
    <section class="py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16">
                <h3 class="text-3xl font-bold text-gray-800 text-center mb-8">Programming</h3>

                <!-- Programming Evolution & PID Optimization -->
                <div class="grid lg:grid-cols-3 gap-8 mb-12">
                    <!-- Platform Evolution -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h4 class="text-lg font-semibold text-blue-600 mb-4 text-center">Platform Evolution</h4>
                        <div class="space-y-4 mb-6">
                            <div class="bg-gray-100 p-3 rounded-lg border border-gray-300 text-center">
                                <img src="../spikeprimeapplogo.png" alt="SPIKE Prime App" class="h-8 mx-auto mb-2 object-contain">
                                <p class="text-sm font-medium text-gray-700">SPIKE Prime</p>
                                <p class="text-xs text-gray-600">Block Programming</p>
                            </div>
                            <div class="text-center">
                                <i class="fas fa-arrow-down text-green-600"></i>
                            </div>
                            <div class="bg-gradient-to-br from-blue-100 to-green-100 p-3 rounded-lg border-2 border-green-400 text-center">
                                <img src="../pybrickslogo.png" alt="Pybricks" class="h-8 mx-auto mb-2 object-contain">
                                <p class="text-sm font-medium text-gray-700">Pybricks</p>
                                <p class="text-xs text-gray-600">MicroPython</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3 text-center text-sm">
                            <div class="bg-green-100 p-2 rounded">
                                <p class="font-bold text-green-600">95%</p>
                                <p class="text-xs text-gray-600">Consistency</p>
                            </div>
                            <div class="bg-blue-100 p-2 rounded">
                                <p class="font-bold text-blue-600">±2°</p>
                                <p class="text-xs text-gray-600">Turn Accuracy</p>
                            </div>
                        </div>
                    </div>

                    <!-- Key Improvements -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h4 class="text-lg font-semibold text-blue-600 mb-4 text-center">Key Improvements</h4>
                        <div class="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mb-4">Anthony</div>
                        <ul class="space-y-3">
                            <li class="flex items-start space-x-3">
                                <div class="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center mt-0.5">
                                    <i class="fas fa-code text-white text-xs"></i>
                                </div>
                                <span class="text-gray-700 text-sm"><strong>Higher loop frequency</strong> for smoother motion</span>
                            </li>
                            <li class="flex items-start space-x-3">
                                <div class="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center mt-0.5">
                                    <i class="fas fa-compass text-white text-xs"></i>
                                </div>
                                <span class="text-gray-700 text-sm"><strong>Direct gyro access</strong> for accurate heading control</span>
                            </li>
                            <li class="flex items-start space-x-3">
                                <div class="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center mt-0.5">
                                    <i class="fas fa-cog text-white text-xs"></i>
                                </div>
                                <span class="text-gray-700 text-sm"><strong>Encoder precision</strong> for exact distance and rotations</span>
                            </li>
                            <li class="flex items-start space-x-3">
                                <div class="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center mt-0.5">
                                    <i class="fas fa-chart-line text-white text-xs"></i>
                                </div>
                                <span class="text-gray-700 text-sm"><strong>PID corrections</strong> for drift compensation</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Code Examples -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h4 class="text-lg font-semibold text-blue-600 mb-4 text-center">Code Examples</h4>
                        <div class="space-y-4">
                            <img src="../spikeprimeblockbasedexample.png" alt="SPIKE Prime block-based programming" class="w-full h-24 object-cover rounded-lg">
                            <img src="../pybricks screenshot.png" alt="Pybricks code screenshot" class="w-full h-24 object-cover rounded-lg">
                        </div>
                        <p class="text-gray-700 text-sm mt-4">
                            We tested various Kp and Kd values to optimize drive performance. Our best results came from Kp=1.15 and Kd=0.02.
                        </p>
                    </div>
                </div>

                <!-- Strategy Integration -->
                <div class="bg-white p-6 rounded-xl shadow-md mb-12">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4 text-center">Programming & Strategy Integration</h4>
                    <p class="text-gray-700 mb-4 text-center">Code supports mission grouping and quick attachment swaps — teams can switch runs with minimal reconfiguration and rely on consistent sensor feedback.</p>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="flex items-center space-x-2"><i class="fas fa-check text-green-500"></i><span class="text-sm text-gray-700">Encapsulated run scripts for A-E runs</span></div>
                        <div class="flex items-center space-x-2"><i class="fas fa-check text-green-500"></i><span class="text-sm text-gray-700">Parameterized speed/turn settings per attachment</span></div>
                        <div class="flex items-center space-x-2"><i class="fas fa-check text-green-500"></i><span class="text-sm text-gray-700">Automated sensor calibration routines</span></div>
                    </div>
                </div>

                <!-- PID Tuning Results -->
                        
                        <!-- Kp Chart -->
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                            <h5 class="text-xl font-semibold text-blue-600 mb-4 text-center">Kp Tuning (Heading Error in Degrees)</h5>
                            <div class="text-center mb-6">
                                <select id="kpSelect" class="px-4 py-2 text-lg border-2 border-blue-600 rounded-lg bg-white cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-300">
                                    <option value="0.6">Kp = 0.6</option>
                                    <option value="0.8">Kp = 0.8</option>
                                    <option value="1.0">Kp = 1.0</option>
                                    <option value="1.15" selected>Kp = 1.15 (Best)</option>
                                    <option value="1.2">Kp = 1.2</option>
                                </select>
                            </div>
                            <div class="w-full">
                                <canvas id="kpChart" class="max-h-96 w-full"></canvas>
                            </div>
                        </div>

                        <!-- Kd Chart -->
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                            <h5 class="text-xl font-semibold text-blue-600 mb-4 text-center">Kd Tuning (Heading Error in Degrees)</h5>
                            <div class="text-center mb-6">
                                <select id="kdSelect" class="px-4 py-2 text-lg border-2 border-blue-600 rounded-lg bg-white cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-300">
                                    <option value="0.0001">Kd = 0.0001</option>
                                    <option value="0.001">Kd = 0.001</option>
                                    <option value="0.01">Kd = 0.01</option>
                                    <option value="0.02" selected>Kd = 0.02 (Best)</option>
                                </select>
                            </div>
                            <div class="w-full">
                                <canvas id="kdChart" class="max-h-96 w-full"></canvas>
                            </div>
                        </div>
                    </div>

<!-- Code Implementation -->
                    <div class="mb-12">
                        <h4 class="text-2xl font-semibold text-blue-600 text-center mb-8">Code Implementation</h4>
                        
                        <div class="grid lg:grid-cols-2 gap-8 mb-8">
                            <!-- Drive Straight Function -->
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h5 class="text-lg font-semibold text-gray-800 mb-4">Drive Straight Function</h5>
                                <div class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
                                    <pre class="text-sm"><code>def drive_straight(distance_mm, speed, kp=1.15, kd=0.02):
  robot.reset_gyro()
  robot.reset_encoders()
  
  while robot.get_distance() < distance_mm:
      error = robot.get_heading()
      correction = (kp * error) + (kd * (error - prev_error))
      left_power = speed - correction
      right_power = speed + correction
      
      robot.set_motors(left_power, right_power)
      prev_error = error
  
  robot.stop()</code></pre>
                                </div>
                            </div>

                            <!-- Turn Function -->
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h5 class="text-lg font-semibold text-gray-800 mb-4">Turn Function</h5>
                                <div class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto">
                                    <pre class="text-sm"><code>def turn(degrees, speed, kp=1.0):
  robot.reset_gyro()
  
  while abs(robot.get_heading()) < abs(degrees):
      error = degrees - robot.get_heading()
      power = kp * error
      
      robot.set_motors(power, -power)
  
  robot.stop()</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Summary -->
                        <div class="bg-blue-50 p-6 rounded-xl">
                            <p class="text-gray-700 text-center">
                                Our drive-straight code uses PID-style corrections with optimized values: <strong>Kp=1.15</strong> and <strong>Kd=0.02</strong>. 
                                These values emerged from systematic testing across different speeds and distances, resulting in repeatable and reliable performance, 
                                even under varying loads and battery levels.
                            </p>
                        </div>
                    </div>

                    <!-- Version Control with GitHub -->
                    <div class="mb-12">
                        <h4 class="text-2xl font-semibold text-blue-600 text-center mb-8">Version Control with GitHub</h4>
                        
                        <div class="grid lg:grid-cols-3 gap-8">
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h5 class="text-lg font-semibold text-blue-600 mb-4">Why We Use GitHub</h5>
                                <p class="text-gray-700 mb-4">
                                    GitHub allows our team to collaborate on code safely. Each team member can work on different runs or features without overwriting others' work.
                                </p>
                                <p class="text-gray-700">
                                    We use branches for experimental changes and commits to track our progress. This means if something breaks, we can roll back to a working version.
                                </p>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h5 class="text-lg font-semibold text-blue-600 mb-4">Benefits for Our Team</h5>
                                <ul class="text-gray-700 space-y-2">
                                    <li class="flex items-start space-x-2"><strong>Collaboration:</strong><span class="ml-2">Multiple programmers can work simultaneously</span></li>
                                    <li class="flex items-start space-x-2"><strong>History:</strong><span class="ml-2">Every change is documented with commit messages</span></li>
                                    <li class="flex items-start space-x-2"><strong>Backup:</strong><span class="ml-2">Code is safely stored in the cloud</span></li>
                                    <li class="flex items-start space-x-2"><strong>Testing:</strong><span class="ml-2">We can experiment without breaking working code</span></li>
                                    <li class="flex items-start space-x-2"><strong>Learning:</strong><span class="ml-2">We review each other's code and learn better practices</span></li>
                                </ul>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                                <h5 class="text-lg font-semibold text-blue-600 mb-4">GitHub in Action</h5>
                                <img src="../github_ss.png" alt="GitHub repository screenshot" class="w-full rounded-lg mb-3">
                                <p class="text-sm text-gray-600">We organize runs, attachments, and PID tuning experiments with clear commit history and pull requests.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // -------------------- Kp Data --------------------
        const kpData = [
            { kp: 0.6, speed: 60, rotations: 1, error: -2.4 },
            { kp: 0.6, speed: 60, rotations: 5, error: -3.5 },
            { kp: 0.6, speed: 60, rotations: 10, error: -3.8 },
            { kp: 0.6, speed: 80, rotations: 1, error: -4.2 },
            { kp: 0.6, speed: 80, rotations: 5, error: -4.3 },
            { kp: 0.6, speed: 80, rotations: 10, error: 2.7 },
            { kp: 0.6, speed: 100, rotations: 1, error: -6.5 },
            { kp: 0.6, speed: 100, rotations: 5, error: 8 },
            { kp: 0.6, speed: 100, rotations: 10, error: -6 },

            { kp: 0.8, speed: 60, rotations: 1, error: -1.6 },
            { kp: 0.8, speed: 60, rotations: 5, error: 5.9 },
            { kp: 0.8, speed: 60, rotations: 10, error: 9.2 },
            { kp: 0.8, speed: 80, rotations: 1, error: -2.1 },
            { kp: 0.8, speed: 80, rotations: 5, error: 7.3 },
            { kp: 0.8, speed: 80, rotations: 10, error: -12.4 },

            { kp: 1.0, speed: 60, rotations: 1, error: 0.9 },
            { kp: 1.0, speed: 60, rotations: 5, error: 4.1 },
            { kp: 1.0, speed: 60, rotations: 10, error: -7.8 },
            { kp: 1.0, speed: 80, rotations: 1, error: 1.6 },
            { kp: 1.0, speed: 80, rotations: 5, error: -6.2 },
            { kp: 1.0, speed: 80, rotations: 10, error: 11.9 },

            { kp: 1.15, speed: 60, rotations: 1, error: -0.1 },
            { kp: 1.15, speed: 60, rotations: 5, error: -0.2 },
            { kp: 1.15, speed: 60, rotations: 10, error: -0.4 },
            { kp: 1.15, speed: 80, rotations: 1, error: 0.3 },
            { kp: 1.15, speed: 80, rotations: 5, error: -0.7 },
            { kp: 1.15, speed: 80, rotations: 10, error: -1.1 },
            { kp: 1.15, speed: 100, rotations: 1, error: 0.6 },
            { kp: 1.15, speed: 100, rotations: 5, error: 1.3 },
            { kp: 1.15, speed: 100, rotations: 10, error: -1.0 },

            { kp: 1.2, speed: 60, rotations: 1, error: 0.5 },
            { kp: 1.2, speed: 60, rotations: 5, error: 1.1 },
            { kp: 1.2, speed: 60, rotations: 10, error: 2.3 },
            { kp: 1.2, speed: 80, rotations: 1, error: 0.9 },
            { kp: 1.2, speed: 80, rotations: 5, error: 2.0 },
            { kp: 1.2, speed: 80, rotations: 10, error: 3.8 },
            { kp: 1.2, speed: 100, rotations: 1, error: 3.4 },
            { kp: 1.2, speed: 100, rotations: 5, error: -3.1 },
            { kp: 1.2, speed: 100, rotations: 10, error: 5.6 }
        ];

        const kpColors = ['#e6194b','#3cb44b','#4363d8'];
        const kpCtx = document.getElementById('kpChart').getContext('2d');
        let kpChart;

        function updateKpChart(selectedKp) {
            const speeds = [60,80,100];
            const datasets = speeds.map((speed,i)=>{
                const points = kpData
                    .filter(d => d.kp == selectedKp && d.speed == speed)
                    .map(d => ({x:d.rotations, y:d.error}));
                return {
                    label: `Speed ${speed}%`,
                    data: points,
                    borderColor: kpColors[i],
                    backgroundColor: kpColors[i],
                    fill: false,
                    tension:0.2
                };
            });

            if(kpChart) {
                kpChart.data.datasets = datasets;
                kpChart.update();
            } else {
                kpChart = new Chart(kpCtx,{
                    type:'line',
                    data:{datasets},
                    options:{
                        responsive:true,
                        maintainAspectRatio: true,
                        plugins:{
                            legend:{position:'bottom'},
                            title:{display:true,text:`Kp=${selectedKp} Tuning: Heading Error vs Rotations`},
                            tooltip:{callbacks:{
                                label: ctx => `Error: ${ctx.parsed.y}° (Rotations: ${ctx.parsed.x})`
                            }}
                        },
                        scales:{
                            x:{type:'linear', title:{display:true,text:'Rotations'}, min:0, ticks:{stepSize:1}},
                            y:{title:{display:true,text:'Error (degrees)'}}
                        }
                    }
                });
            }
        }

        document.getElementById('kpSelect').addEventListener('change', e=>{
            updateKpChart(e.target.value);
        });

        updateKpChart(1.15); // default best Kp

        // -------------------- Kd Data --------------------
        const kdData = [
            { kd: 0.0001, rotations: 1, error: 5 },
            { kd: 0.0001, rotations: 2, error: 4.2 },
            { kd: 0.0001, rotations: 3, error: 3.8 },
            { kd: 0.0001, rotations: 4, error: 3.5 },
            { kd: 0.0001, rotations: 5, error: 3.2 },

            { kd: 0.001, rotations: 1, error: 4.5 },
            { kd: 0.001, rotations: 2, error: 3.5 },
            { kd: 0.001, rotations: 3, error: 2.9 },
            { kd: 0.001, rotations: 4, error: 2.5 },
            { kd: 0.001, rotations: 5, error: 2.2 },

            { kd: 0.01, rotations: 1, error: 2.0 },
            { kd: 0.01, rotations: 2, error: 1.5 },
            { kd: 0.01, rotations: 3, error: 1.2 },
            { kd: 0.01, rotations: 4, error: 1.0 },
            { kd: 0.01, rotations: 5, error: 0.8 },

            { kd: 0.02, rotations: 1, error: 0.5 },
            { kd: 0.02, rotations: 2, error: 0.3 },
            { kd: 0.02, rotations: 3, error: 0.1 },
            { kd: 0.02, rotations: 4, error: -0.1 },
            { kd: 0.02, rotations: 5, error: -0.2 }
        ];

        const kdColors = ['#e6194b','#3cb44b','#4363d8','#f58231'];
        const kdCtx = document.getElementById('kdChart').getContext('2d');
        let kdChart;

        function updateKdChart(selectedKd) {
            const points = kdData.filter(d => d.kd == selectedKd)
                                 .map(d => ({x:d.rotations, y:d.error}));
            const dataset = [{
                label: `Kd=${selectedKd}${selectedKd==0.02?' (Best)':''}`,
                data: points,
                borderColor: kdColors[ kdData.findIndex(d=>d.kd==selectedKd)%kdColors.length ],
                backgroundColor: kdColors[ kdData.findIndex(d=>d.kd==selectedKd)%kdColors.length ],
                fill:false,
                tension:0.2
            }];

            if(kdChart){
                kdChart.data.datasets = dataset;
                kdChart.update();
            }else{
                kdChart = new Chart(kdCtx,{
                    type:'line',
                    data:{datasets:dataset},
                    options:{
                        responsive:true,
                        maintainAspectRatio: true,
                        plugins:{
                            legend:{position:'bottom'},
                            title:{display:true,text:`Kd=${selectedKd} Tuning: Heading Error vs Rotations`},
                            tooltip:{callbacks:{
                                label: ctx => `Error: ${ctx.parsed.y}° (Rotations: ${ctx.parsed.x})`
                            }}
                        },
                        scales:{
                            x:{type:'linear', title:{display:true,text:'Rotations'}, min:0, ticks:{stepSize:1}},
                            y:{title:{display:true,text:'Error (degrees)'}}
                        }
                    }
                });
            }
        }

        document.getElementById('kdSelect').addEventListener('change', e=>{
            updateKdChart(e.target.value);
        });

        updateKdChart(0.02); // default best Kd
    </script>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-gray-400">&copy; 2024 AI Future Team 1. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
